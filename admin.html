<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</title>

<style>
body{
  margin:0;
  font-family:Tajawal,Tahoma;
  background:#020617;
  color:#fff;
}

header{
  padding:18px 24px;
  background:#020617;
  border-bottom:1px solid #1e293b;
  text-align:center;
  font-size:20px;
}

/* ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø¯Ù…Ù† ===== */
.admin-actions{
  display:flex;
  justify-content:center;
  gap:14px;
  margin:18px 0;
  flex-wrap:wrap;
}

.action-btn{
  padding:12px 22px;
  border-radius:999px;
  font-size:14px;
  text-decoration:none;
  color:#fff;
  transition:.35s;
}

.action-btn.store{
  background:linear-gradient(135deg,#334155,#0f172a);
}

/* ===== Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© ===== */
.add-box{
  max-width:900px;
  margin:20px auto;
  padding:20px;
  border:1px solid #1e293b;
  border-radius:22px;
  background:#020617;
  animation:fade .6s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(20px)}
}

.add-box h3{
  margin-top:0;
  margin-bottom:14px;
}

.add-box input,
.add-box textarea{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:14px;
  border:none;
  outline:none;
  font-family:inherit;
}

.add-box textarea{
  resize:none;
  height:80px;
}

.add-box button{
  padding:12px 24px;
  border:none;
  border-radius:14px;
  background:#2563eb;
  color:#fff;
  cursor:pointer;
}

/* ===== Ø§Ù„Ø·Ù„Ø¨Ø§Øª ===== */
.container{
  max-width:1000px;
  margin:auto;
  padding:24px;
}

.card{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:22px;
  padding:18px;
  margin-bottom:18px;
  animation:cardIn .7s ease;
}

@keyframes cardIn{
  from{opacity:0;transform:translateY(30px)}
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.badge{
  background:#022c22;
  color:#4ade80;
  padding:6px 12px;
  border-radius:999px;
  font-size:13px;
}

.info{
  line-height:1.8;
  color:#e5e7eb;
}

.proof img{
  width:100%;
  max-height:240px;
  object-fit:cover;
  border-radius:14px;
  margin-top:12px;
}

.empty{
  text-align:center;
  margin-top:40px;
  color:#94a3b8;
}
</style>
</head>

<body>

<header>ğŸ›  Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</header>

<div class="admin-actions">
  <a href="index.html" class="action-btn store">ğŸª Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ØªØ¬Ø±</a>
</div>

<!-- âœ… Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© -->
<div class="add-box">
  <h3>â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©</h3>

  <input id="sName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©">
  <textarea id="sDetails" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©"></textarea>
  <input id="sPrice" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø®Ø¯Ù…Ø©">
  <input id="sImage" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¯Ù…Ø©">

  <button onclick="addService()">Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø©</button>
</div>

<!-- âœ… Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
<div class="container" id="orders"></div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain:"digital-store-268a9.firebaseapp.com",
  projectId:"digital-store-268a9"
});

const auth = firebase.auth();
const db = firebase.firestore();
const box = document.getElementById("orders");

/* ===== Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© ===== */
function addService(){
  const name = sName.value.trim();
  const details = sDetails.value.trim();
  const price = sPrice.value;
  const image = sImage.value.trim();

  if(!name || !details || !price || !image){
    alert("âŒ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©");
    return;
  }

  db.collection("services").add({
    name,
    details,
    price,
    image,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  }).then(()=>{
    alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø©");
    sName.value = sDetails.value = sPrice.value = sImage.value = "";
  });
}

/* ===== Ø§Ù„Ø·Ù„Ø¨Ø§Øª ===== */
auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="login.html";
    return;
  }

  db.collection("orders")
    .orderBy("createdAt","desc")
    .onSnapshot(snap=>{
      box.innerHTML="";
      if(snap.empty){
        box.innerHTML=`<div class="empty">ğŸ“­ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</div>`;
        return;
      }

      snap.forEach(doc=>{
        const o = doc.data();
        const date = o.createdAt?.toDate().toLocaleString("ar-EG") || "-";

        box.innerHTML += `
          <div class="card">
            <div class="top">
              <b>ğŸ“¦ ${o.service}</b>
              <span class="badge">${o.status || "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}</span>
            </div>
            <div class="info">
              ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${o.email}<br>
              ğŸ’³ Ø§Ù„Ø¯ÙØ¹: ${o.paymentMethod}<br>
              ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $${o.price}<br>
              ğŸ•’ ${date}
            </div>
            ${o.proofImage ? `<div class="proof"><img src="${o.proofImage}"></div>` : ""}
          </div>
        `;
      });
    });
});
</script>

</body>
  </html>
