<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</title>

<style>
body{
  margin:0;
  font-family:Tajawal,Tahoma;
  background:#020617;
  color:#fff;
}

header{
  padding:18px 24px;
  background:#020617;
  border-bottom:1px solid #1e293b;
  text-align:center;
  font-size:20px;
}

/* ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø¯Ù…Ù† ===== */
.admin-actions{
  display:flex;
  justify-content:center;
  gap:14px;
  margin:18px 0;
  flex-wrap:wrap;
}

.action-btn{
  padding:12px 22px;
  border-radius:999px;
  font-size:14px;
  text-decoration:none;
  color:#fff;
  transition:.35s;
  display:flex;
  align-items:center;
  gap:6px;
}

.action-btn.store{
  background:linear-gradient(135deg,#334155,#0f172a);
}

.action-btn.add{
  background:linear-gradient(135deg,#2563eb,#1e40af);
}

.action-btn:hover{
  transform:scale(1.08);
  box-shadow:0 12px 30px rgba(0,0,0,.4);
}

.container{
  max-width:1000px;
  margin:auto;
  padding:24px;
}

/* ğŸ”¥ ÙƒØ±Øª Ø§Ù„Ø·Ù„Ø¨ */
.card{
  background:linear-gradient(160deg,#020617,#020617);
  border:1px solid #1e293b;
  border-radius:22px;
  padding:18px;
  margin-bottom:18px;
  animation:cardIn .7s cubic-bezier(.25,.8,.25,1);
  transition:.35s;
}

.card:hover{
  transform:translateY(-6px) scale(1.01);
  box-shadow:0 20px 50px rgba(0,0,0,.45);
  border-color:#38bdf8;
}

@keyframes cardIn{
  from{
    opacity:0;
    transform:translateY(40px) scale(.95);
  }
  to{
    opacity:1;
    transform:none;
  }
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}

.badge{
  background:#022c22;
  color:#4ade80;
  padding:6px 12px;
  border-radius:999px;
  font-size:13px;
}

.info{
  font-size:15px;
  line-height:1.8;
  color:#e5e7eb;
}

/* ğŸ–¼ ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¯Ù…Ø© */
.service-img{
  margin-top:14px;
  overflow:hidden;
  border-radius:16px;
}

.service-img img{
  width:100%;
  max-height:220px;
  object-fit:cover;
}

/* ğŸ–¼ ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª */
.proof{
  margin-top:14px;
  overflow:hidden;
  border-radius:16px;
}

.proof img{
  width:100%;
  max-height:260px;
  object-fit:cover;
  cursor:pointer;
  transition:.4s;
}

.proof img:hover{
  transform:scale(1.08);
}

/* ØªÙƒØ¨ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:999;
}

.lightbox img{
  max-width:90%;
  max-height:90%;
  border-radius:18px;
  animation:zoom .4s ease;
}

@keyframes zoom{
  from{transform:scale(.6);opacity:0}
}

/* Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª */
.empty{
  text-align:center;
  margin-top:60px;
  color:#94a3b8;
}
</style>
</head>

<body>

<header>ğŸ›  Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</header>

<div class="admin-actions">
  <a href="index.html" class="action-btn store">ğŸª Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ØªØ¬Ø±</a>
  <a href="add-service.html" class="action-btn add">â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©</a>
</div>

<div class="container" id="orders"></div>

<div class="lightbox" id="lightbox" onclick="this.style.display='none'">
  <img id="lightImg">
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain:"digital-store-268a9.firebaseapp.com",
  projectId:"digital-store-268a9"
});

const auth = firebase.auth();
const db = firebase.firestore();
const box = document.getElementById("orders");

auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="login.html";
    return;
  }

  db.collection("orders")
    .orderBy("createdAt","desc")
    .onSnapshot(snap=>{
      box.innerHTML="";

      if(snap.empty){
        box.innerHTML=`<div class="empty">ğŸ“­ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</div>`;
        return;
      }

      snap.forEach(doc=>{
        const o = doc.data();
        const date = o.createdAt?.toDate().toLocaleString("ar-EG") || "-";

        box.innerHTML += `
          <div class="card">
            <div class="top">
              <b>ğŸ“¦ ${o.service}</b>
              <span class="badge">${o.status || "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}</span>
            </div>

            <div class="info">
              ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${o.email.split("@")[0]}<br>
              ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: ${o.email}<br>
              ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©: ${o.serviceDetails || "-"}<br>
              ğŸ’³ Ø§Ù„Ø¯ÙØ¹: ${o.paymentMethod}<br>
              ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $${o.price}<br>
              ğŸ•’ Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}
            </div>

            ${o.serviceImage ? `
              <div class="service-img">
                <img src="${o.serviceImage}">
              </div>` : ""}

            ${o.proofImage ? `
              <div class="proof">
                <img src="${o.proofImage}" onclick="openImg('${o.proofImage}')">
              </div>` : ""}
          </div>
        `;
      });
    });
});

function openImg(src){
  document.getElementById("lightImg").src = src;
  document.getElementById("lightbox").style.display="flex";
}
</script>

</body>
  </html>
