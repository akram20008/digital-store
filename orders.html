<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨Ø§ØªÙŠ</title>

<style>
body{
  margin:0;
  font-family:Tajawal,Tahoma;
  background:#020617;
  color:#fff;
}
header{
  padding:15px 20px;
  background:#020617;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header a{
  color:#38bdf8;
  text-decoration:none;
}
.container{
  max-width:900px;
  margin:auto;
  padding:30px 15px;
}
.order{
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(14px);
  border-radius:18px;
  padding:18px;
  margin-bottom:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
  animation:fadeUp .6s ease;
}
.order h3{margin:0 0 10px}
.order p{margin:6px 0;color:#e5e7eb}
.status{
  display:inline-block;
  padding:6px 12px;
  border-radius:20px;
  font-size:13px;
  background:#f59e0b;
  color:#000;
}
.order img{
  width:120px;
  border-radius:12px;
  margin-top:12px;
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(20px)}
}
</style>
</head>

<body>

<header>
  <h2>ğŸ“¦ Ø·Ù„Ø¨Ø§ØªÙŠ</h2>
  <a href="index.html">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ØªØ¬Ø±</a>
</header>

<div class="container" id="orders"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain:"digital-store-268a9.firebaseapp.com",
  projectId:"digital-store-268a9"
});

const auth=firebase.auth();
const db=firebase.firestore();
const ordersDiv=document.getElementById("orders");

auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="login.html";
    return;
  }

  db.collection("orders")
  .where("email","==",user.email)
  .orderBy("createdAt","desc")
  .onSnapshot(snapshot=>{
    ordersDiv.innerHTML="";
    if(snapshot.empty){
      ordersDiv.innerHTML="<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯</p>";
      return;
    }

    snapshot.forEach(doc=>{
      const o=doc.data();
      ordersDiv.innerHTML+=`
        <div class="order">
          <h3>${o.service || "Ø®Ø¯Ù…Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©"}</h3>
          <p>ğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${o.price || "â€”"}</p>
          <p>ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${o.paymentMethod || "Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯"}</p>
          <span class="status">${o.status || "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©"}</span>

          ${
            o.proofImage
            ? `<img src="${o.proofImage}">`
            : `<p>ğŸ“· Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª</p>`
          }
        </div>
      `;
    });
  });
});
</script>

</body>
  </html>
