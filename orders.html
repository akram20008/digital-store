<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨Ø§ØªÙŠ</title>

<style>
body{
  margin:0;
  font-family:Tahoma;
  background:linear-gradient(135deg,#020617,#1e3a8a);
  color:#fff;
}

header{
  background:rgba(2,6,23,.9);
  backdrop-filter:blur(8px);
  padding:15px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

header h2{margin:0;font-size:18px}

header button{
  background:#dc2626;
  border:none;
  color:#fff;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}

.container{
  max-width:900px;
  margin:auto;
  padding:30px 15px;
}

.order{
  background:#fff;
  color:#020617;
  border-radius:16px;
  padding:18px;
  margin-bottom:15px;
  box-shadow:0 15px 35px rgba(0,0,0,.25);
  animation:slideUp .7s ease both;
  transition:.3s;
}

.order:hover{
  transform:scale(1.03);
}

.status{
  display:inline-block;
  margin-top:8px;
  padding:4px 10px;
  border-radius:20px;
  font-size:13px;
  background:#2563eb;
  color:#fff;
}

.status.done{
  background:#16a34a;
}

/* ===== Animation ===== */
@keyframes slideUp{
  from{
    opacity:0;
    transform:translateY(40px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}
</style>
</head>

<body>

<header>
  <h2>ğŸ“¦ Ø·Ù„Ø¨Ø§ØªÙŠ</h2>
  <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</header>

<div class="container" id="orders"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain: "digital-store-268a9.firebaseapp.com",
  projectId: "digital-store-268a9"
});

const auth = firebase.auth();
const db = firebase.firestore();
const ordersDiv = document.getElementById("orders");

/* Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø© + ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="login.html";
    return;
  }

  db.collection("orders")
  .where("email","==",user.email)
  .orderBy("createdAt","desc")
  .onSnapshot(snapshot=>{
    ordersDiv.innerHTML="";
    snapshot.forEach(doc=>{
      const o = doc.data();
      ordersDiv.innerHTML += `
        <div class="order">
          <h3>${o.service}</h3>
          <div class="status ${o.status==="ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°"?"done":""}">
            ${o.status}
          </div>
        </div>
      `;
    });

    if(snapshot.empty){
      ordersDiv.innerHTML="<p>âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯</p>";
    }
  });
});

function logout(){
  auth.signOut().then(()=>location.href="login.html");
}
</script>

</body>
</html>
