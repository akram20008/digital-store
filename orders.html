<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨Ø§ØªÙŠ</title>

<style>
body{
  margin:0;
  font-family:Tajawal,Tahoma;
  background:#020617;
  color:#fff;
}
header{
  padding:16px 20px;
  background:#020617;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #1e293b;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
.card{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
  animation:fade .6s ease;
}
@keyframes fade{
  from{opacity:0;transform:translateY(20px)}
}
.card img{
  width:100%;
  max-height:200px;
  object-fit:cover;
  border-radius:12px;
  margin-top:10px;
}
.status{
  margin-top:8px;
  color:#4ade80;
}
.back{
  color:#93c5fd;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <div class="back" onclick="location.href='index.html'">â¬… Ø§Ù„Ù…ØªØ¬Ø±</div>
  <h3>ğŸ“¦ Ø·Ù„Ø¨Ø§ØªÙŠ</h3>
</header>

<div class="container" id="orders"></div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain:"digital-store-268a9.firebaseapp.com",
  projectId:"digital-store-268a9"
});

const auth=firebase.auth();
const db=firebase.firestore();
const box=document.getElementById("orders");

auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="login.html";
    return;
  }

  db.collection("orders")
    .where("email","==",user.email)
    .orderBy("createdAt","desc")
    .onSnapshot(snap=>{
      box.innerHTML="";
      if(snap.empty){
        box.innerHTML="<p>âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</p>";
        return;
      }

      snap.forEach(doc=>{
        const o=doc.data();
        box.innerHTML+=`
          <div class="card">
            <b>ğŸ“¦ ${o.service}</b><br>
            ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $${o.price}<br>
            ğŸ’³ Ø§Ù„Ø¯ÙØ¹: ${o.paymentMethod}<br>
            <div class="status">ğŸ“Œ ${o.status}</div>
            ${o.proofImage ? `<img src="${o.proofImage}">` : ""}
          </div>
        `;
      });
    });
});
</script>

</body>
</html>
