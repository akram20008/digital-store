<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙØ¹</title>

<style>
:root{
  --main:#2563eb;
  --dark:#020617;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Tajawal,Tahoma;
  background:radial-gradient(circle at top,#1e3a8a,#020617 70%);
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
.bg{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 20%,#2563eb33,transparent 50%),
    radial-gradient(circle at 80% 80%,#22c55e33,transparent 50%);
  animation:bg 12s ease-in-out infinite alternate;
  z-index:-1;
}
@keyframes bg{
  from{transform:scale(1)}
  to{transform:scale(1.15)}
}

/* Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ */
.box{
  width:92%;
  max-width:460px;
  background:rgba(2,6,23,.75);
  backdrop-filter:blur(22px);
  border-radius:26px;
  padding:28px;
  box-shadow:0 40px 100px rgba(0,0,0,.8);
  animation:boxIn .9s cubic-bezier(.17,.89,.32,1.49);
}
@keyframes boxIn{
  from{opacity:0;transform:translateY(60px) scale(.85)}
  to{opacity:1;transform:none}
}

h2{
  text-align:center;
  margin-bottom:20px;
}

/* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© */
.info{
  background:#020617;
  border-radius:16px;
  padding:14px;
  margin-bottom:20px;
  animation:fadeUp .6s ease .2s both;
}

/* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ¹ */
.pay{
  display:flex;
  align-items:center;
  gap:14px;
  padding:16px;
  border-radius:18px;
  background:#111827;
  margin-bottom:12px;
  cursor:pointer;
  transition:.35s;
  animation:fadeUp .6s ease both;
}
.pay:nth-child(1){animation-delay:.3s}
.pay:nth-child(2){animation-delay:.4s}
.pay:nth-child(3){animation-delay:.5s}
.pay:nth-child(4){animation-delay:.6s}

.pay:hover{
  transform:translateY(-6px) scale(1.03);
  background:#1e40af;
}
.pay.active{
  background:linear-gradient(135deg,#16a34a,#166534);
  box-shadow:0 0 0 2px #4ade80 inset;
}

.icon{
  width:44px;
  height:44px;
  border-radius:14px;
  background:#020617;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
}

/* Ø±ÙØ¹ ØµÙˆØ±Ø© */
.upload{
  margin-top:16px;
  background:#020617;
  padding:14px;
  border-radius:16px;
  animation:fadeUp .6s ease .7s both;
}
.upload input{width:100%;color:#fff}

/* Ø²Ø± */
button{
  width:100%;
  margin-top:20px;
  padding:16px;
  border:none;
  border-radius:20px;
  background:linear-gradient(135deg,#2563eb,#1e40af);
  color:#fff;
  font-size:16px;
  cursor:pointer;
  transition:.35s;
  animation:pulse 2s infinite;
}
button:hover{
  transform:scale(1.06);
}
@keyframes pulse{
  0%,100%{box-shadow:0 0 0 0 #2563eb66}
  50%{box-shadow:0 0 30px 6px #2563eb66}
}

/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¹Ø§Ù… */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:none}
}
</style>
</head>

<body>

<div class="bg"></div>

<div class="box">
  <h2>ğŸ’³ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙØ¹</h2>

  <div class="info">
    ğŸ“¦ Ø§Ù„Ø®Ø¯Ù…Ø©: <b id="serviceName"></b><br>
    ğŸ’° Ø§Ù„Ø³Ø¹Ø±: $<b id="servicePrice"></b>
  </div>

  <div class="pay" onclick="selectPay(this,'Ø¨Ù†Ùƒ ÙÙ„Ø³Ø·ÙŠÙ†')">
    <div class="icon">ğŸ¦</div> Ø¨Ù†Ùƒ ÙÙ„Ø³Ø·ÙŠÙ†
  </div>
  <div class="pay" onclick="selectPay(this,'Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©')">
    <div class="icon">ğŸ“±</div> Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©
  </div>
  <div class="pay" onclick="selectPay(this,'PayPal')">
    <div class="icon">ğŸ’³</div> PayPal
  </div>
  <div class="pay" onclick="selectPay(this,'Ø¬ÙˆØ§Ù„ Ø¨Ø§ÙŠ')">
    <div class="icon">ğŸ“</div> Ø¬ÙˆØ§Ù„ Ø¨Ø§ÙŠ
  </div>

  <div class="upload">
    ğŸ“· Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
    <input type="file" id="proof" accept="image/*">
  </div>

  <button onclick="finish()">ğŸš€ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain:"digital-store-268a9.firebaseapp.com",
  projectId:"digital-store-268a9",
  storageBucket:"digital-store-268a9.appspot.com"
});

const auth=firebase.auth();
const db=firebase.firestore();
const storage=firebase.storage();

serviceName.textContent=localStorage.getItem("serviceName");
servicePrice.textContent=localStorage.getItem("servicePrice");

let paymentMethod="";

function selectPay(el,method){
  document.querySelectorAll(".pay").forEach(p=>p.classList.remove("active"));
  el.classList.add("active");
  paymentMethod=method;
}

async function finish(){
  const user=auth.currentUser;
  const file=document.getElementById("proof").files[0];

  if(!user||!paymentMethod||!file){
    alert("âŒ Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    return;
  }

  const ref=storage.ref("proofs/"+Date.now()+"_"+file.name);
  await ref.put(file);
  const img=await ref.getDownloadURL();

  await db.collection("orders").add({
    uid:user.uid,
    email:user.email,
    service:serviceName.textContent,
    price:servicePrice.textContent,
    paymentMethod,
    proofImage:img,
    status:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
    createdAt:firebase.firestore.FieldValue.serverTimestamp()
  });

  alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
  location.href="orders.html";
}
</script>

</body>
  </html>
