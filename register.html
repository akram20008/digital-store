<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إنشاء حساب</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:Tajawal,Tahoma;
  background:radial-gradient(circle at top,#1e3a8a,#020617 70%);
  color:#fff;
}

.card{
  width:360px;
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(18px);
  border-radius:24px;
  padding:30px 25px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
  animation:pop .8s ease;
}

@keyframes pop{
  from{opacity:0;transform:scale(.85) translateY(40px)}
  to{opacity:1;transform:none}
}

h1{
  text-align:center;
  margin-bottom:25px;
}

input{
  width:100%;
  padding:13px;
  margin-bottom:12px;
  border:none;
  border-radius:14px;
  outline:none;
  font-size:14px;
}

/* checkbox */
.check{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:14px;
  margin:10px 0 15px;
  animation:fadeUp .8s ease;
}

.check input{
  width:18px;
  height:18px;
  accent-color:#2563eb;
  cursor:pointer;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(15px)}
  to{opacity:1;transform:none}
}

button{
  width:100%;
  padding:13px;
  margin-top:10px;
  border:none;
  border-radius:16px;
  cursor:pointer;
  background:linear-gradient(135deg,#2563eb,#1e40af);
  color:#fff;
  font-size:15px;
  transition:.3s;
}

button:hover{
  transform:scale(1.05);
  box-shadow:0 0 30px rgba(37,99,235,.8);
}

.login-link{
  text-align:center;
  margin-top:18px;
  font-size:14px;
}

.login-link a{
  color:#60a5fa;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="card">
  <h1>✨ إنشاء حساب</h1>

  <input id="username" placeholder="اسم المستخدم">
  <input id="email" type="email" placeholder="البريد الإلكتروني">
  <input id="password" type="password" placeholder="كلمة السر">
  <input id="confirm" type="password" placeholder="تأكيد كلمة السر">

  <!-- checkbox -->
  <label class="check">
    <input type="checkbox" id="agree">
    أوافق على الشروط والأحكام
  </label>

  <button onclick="register()">إنشاء الحساب</button>

  <div class="login-link">
    عندك حساب؟ <a href="login.html">تسجيل الدخول</a>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAkVr83u7Oxy-lWvqWlCqyVjIS34J-FRd4",
  authDomain: "digital-store-268a9.firebaseapp.com",
  projectId: "digital-store-268a9"
});

const auth = firebase.auth();
const db = firebase.firestore();

function register(){
  const username = document.getElementById("username").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  const confirm = document.getElementById("confirm").value;
  const agree = document.getElementById("agree").checked;

  if(!username || !email || !password || !confirm){
    alert("❌ جميع الحقول مطلوبة");
    return;
  }

  if(password !== confirm){
    alert("❌ كلمة السر غير متطابقة");
    return;
  }

  if(!agree){
    alert("❌ يجب الموافقة على الشروط والأحكام");
    return;
  }

  auth.createUserWithEmailAndPassword(email,password)
  .then(res=>{
    return db.collection("users").doc(res.user.uid).set({
      username,
      email,
      createdAt:firebase.firestore.FieldValue.serverTimestamp()
    });
  })
  .then(()=>{
    alert("✅ تم إنشاء الحساب بنجاح");
    location.href="index.html";
  })
  .catch(err=>{
    alert("❌ "+err.message);
  });
}
</script>

</body>
  </html>
